{"ast":null,"code":"/* eslint-disable valid-jsdoc, jsdoc/require-jsdoc, jsdoc/require-returns, jsdoc/require-param */\n\n/**\n * MaskedTextBox base module\n */\nimport { EventHandler, isNullOrUndefined, merge, attributes, addClass, removeClass, Browser, extend } from '@syncfusion/ej2-base';\nimport { Input } from '../../input/input';\nvar ERROR = 'e-error';\nvar INPUTGROUP = 'e-input-group';\nvar FLOATINPUT = 'e-float-input';\nvar UTILMASK = 'e-utility-mask';\nvar TOPLABEL = 'e-label-top';\nvar BOTTOMLABEL = 'e-label-bottom';\n/**\n * @hidden\n * Built-in masking elements collection.\n */\n\nexport var regularExpressions = {\n  '0': '[0-9]',\n  '9': '[0-9 ]',\n  '#': '[0-9 +-]',\n  'L': '[A-Za-z]',\n  '?': '[A-Za-z ]',\n  '&': '[^\\x7f ]+',\n  'C': '[^\\x7f]+',\n  'A': '[A-Za-z0-9]',\n  'a': '[A-Za-z0-9 ]'\n};\n/**\n * Generate required masking elements to the MaskedTextBox from user mask input.\n *\n * @hidden\n */\n\nexport function createMask() {\n  attributes(this.element, {\n    'role': 'textbox',\n    'autocomplete': 'off',\n    'autocorrect': 'off',\n    'autocapitalize': 'off',\n    'spellcheck': 'false',\n    'aria-live': 'assertive',\n    'aria-valuenow': ''\n  });\n\n  if (this.mask) {\n    var splitMask = this.mask.split(']');\n\n    for (var i = 0; i < splitMask.length; i++) {\n      if (splitMask[i][splitMask[i].length - 1] === '\\\\') {\n        splitMask[i] = splitMask[i] + ']';\n        var splitInnerMask = splitMask[i].split('[');\n\n        for (var j = 0; j < splitInnerMask.length; j++) {\n          if (splitInnerMask[j][splitInnerMask[j].length - 1] === '\\\\') {\n            splitInnerMask[j] = splitInnerMask[j] + '[';\n          }\n\n          pushIntoRegExpCollec.call(this, splitInnerMask[j]);\n        }\n      } else {\n        var splitInnerMask = splitMask[i].split('[');\n\n        if (splitInnerMask.length > 1) {\n          var chkSpace = false;\n\n          for (var j = 0; j < splitInnerMask.length; j++) {\n            if (splitInnerMask[j] === '\\\\') {\n              this.customRegExpCollec.push('[');\n              this.hiddenMask += splitInnerMask[j] + '[';\n            } else if (splitInnerMask[j] === '') {\n              chkSpace = true;\n            } else if (splitInnerMask[j] !== '' && chkSpace || j === splitInnerMask.length - 1) {\n              this.customRegExpCollec.push('[' + splitInnerMask[j] + ']');\n              this.hiddenMask += this.promptChar;\n              chkSpace = false;\n            } else {\n              pushIntoRegExpCollec.call(this, splitInnerMask[j]);\n            }\n          }\n        } else {\n          pushIntoRegExpCollec.call(this, splitInnerMask[0]);\n        }\n      }\n    }\n\n    this.escapeMaskValue = this.hiddenMask;\n    this.promptMask = this.hiddenMask.replace(/[09?LCAa#&]/g, this.promptChar);\n\n    if (!isNullOrUndefined(this.customCharacters)) {\n      for (var i = 0; i < this.promptMask.length; i++) {\n        if (!isNullOrUndefined(this.customCharacters[this.promptMask[i]])) {\n          this.promptMask = this.promptMask.replace(new RegExp(this.promptMask[i], 'g'), this.promptChar);\n        }\n      }\n    }\n\n    var escapeNumber = 0;\n\n    if (this.hiddenMask.match(new RegExp(/\\\\/))) {\n      for (var i = 0; i < this.hiddenMask.length; i++) {\n        var j = 0;\n\n        if (i >= 1) {\n          j = i;\n        }\n\n        escapeNumber = this.hiddenMask.length - this.promptMask.length;\n        j = j - escapeNumber;\n\n        if (i > 0 && this.hiddenMask[i - 1] !== '\\\\' && (this.hiddenMask[i] === '>' || this.hiddenMask[i] === '<' || this.hiddenMask[i] === '|')) {\n          this.promptMask = this.promptMask.substring(0, j) + this.promptMask.substring(i + 1 - escapeNumber, this.promptMask.length);\n          this.escapeMaskValue = this.escapeMaskValue.substring(0, j) + this.escapeMaskValue.substring(i + 1 - escapeNumber, this.escapeMaskValue.length);\n        }\n\n        if (this.hiddenMask[i] === '\\\\') {\n          this.promptMask = this.promptMask.substring(0, j) + this.hiddenMask[i + 1] + this.promptMask.substring(i + 2 - escapeNumber, this.promptMask.length);\n          this.escapeMaskValue = this.escapeMaskValue.substring(0, j) + this.escapeMaskValue[i + 1] + this.escapeMaskValue.substring(i + 2 - escapeNumber, this.escapeMaskValue.length);\n        }\n      }\n    } else {\n      this.promptMask = this.promptMask.replace(/[>|<]/g, '');\n      this.escapeMaskValue = this.hiddenMask.replace(/[>|<]/g, '');\n    }\n\n    attributes(this.element, {\n      'aria-invalid': 'false'\n    });\n  }\n}\n/**\n * Apply mask ability with masking elements to the MaskedTextBox.\n *\n * @hidden\n */\n\nexport function applyMask() {\n  setElementValue.call(this, this.promptMask);\n  setMaskValue.call(this, this.value);\n}\n/**\n * To wire required events to the MaskedTextBox.\n *\n * @hidden\n */\n\nexport function wireEvents() {\n  EventHandler.add(this.element, 'keydown', maskInputKeyDownHandler, this);\n  EventHandler.add(this.element, 'keypress', maskInputKeyPressHandler, this);\n  EventHandler.add(this.element, 'keyup', maskInputKeyUpHandler, this);\n  EventHandler.add(this.element, 'input', maskInputHandler, this);\n  EventHandler.add(this.element, 'focus', maskInputFocusHandler, this);\n  EventHandler.add(this.element, 'blur', maskInputBlurHandler, this);\n  EventHandler.add(this.element, 'paste', maskInputPasteHandler, this);\n  EventHandler.add(this.element, 'cut', maskInputCutHandler, this);\n  EventHandler.add(this.element, 'drop', maskInputDropHandler, this);\n  EventHandler.add(this.element, 'mousedown', maskInputMouseDownHandler, this);\n  EventHandler.add(this.element, 'mouseup', maskInputMouseUpHandler, this);\n\n  if (this.enabled) {\n    bindClearEvent.call(this);\n\n    if (this.formElement) {\n      EventHandler.add(this.formElement, 'reset', resetFormHandler, this);\n    }\n  }\n}\n/**\n * To unwire events attached to the MaskedTextBox.\n *\n * @hidden\n */\n\nexport function unwireEvents() {\n  EventHandler.remove(this.element, 'keydown', maskInputKeyDownHandler);\n  EventHandler.remove(this.element, 'keypress', maskInputKeyPressHandler);\n  EventHandler.remove(this.element, 'keyup', maskInputKeyUpHandler);\n  EventHandler.remove(this.element, 'input', maskInputHandler);\n  EventHandler.remove(this.element, 'focus', maskInputFocusHandler);\n  EventHandler.remove(this.element, 'blur', maskInputBlurHandler);\n  EventHandler.remove(this.element, 'paste', maskInputPasteHandler);\n  EventHandler.remove(this.element, 'cut', maskInputCutHandler);\n  EventHandler.remove(this.element, 'mousedown', maskInputMouseDownHandler);\n  EventHandler.remove(this.element, 'mouseup', maskInputMouseUpHandler);\n\n  if (this.formElement) {\n    EventHandler.remove(this.formElement, 'reset', resetFormHandler);\n  }\n}\n/**\n * To bind required events to the MaskedTextBox clearButton.\n *\n * @hidden\n */\n\nexport function bindClearEvent() {\n  if (this.showClearButton) {\n    EventHandler.add(this.inputObj.clearButton, 'mousedown touchstart', resetHandler, this);\n  }\n}\n\nfunction resetHandler(e) {\n  e.preventDefault();\n\n  if (!this.inputObj.clearButton.classList.contains('e-clear-icon-hide')) {\n    clear.call(this, e);\n    this.value = '';\n  }\n}\n\nfunction clear(event) {\n  var value = this.element.value;\n  setElementValue.call(this, this.promptMask);\n  this.redoCollec.unshift({\n    value: this.promptMask,\n    startIndex: this.element.selectionStart,\n    endIndex: this.element.selectionEnd\n  });\n  triggerMaskChangeEvent.call(this, event, value);\n  this.element.setSelectionRange(0, 0);\n}\n\nfunction resetFormHandler() {\n  if (this.element.tagName === 'EJS-MASKEDTEXTBOX') {\n    setElementValue.call(this, this.promptMask);\n  } else {\n    this.value = this.initInputValue;\n  }\n}\n/**\n * To get masked value from the MaskedTextBox.\n *\n * @hidden\n */\n\n\nexport function unstrippedValue(element) {\n  return element.value;\n}\n/**\n * To extract raw value from the MaskedTextBox.\n *\n * @hidden\n */\n\nexport function strippedValue(element, maskValues) {\n  var value = '';\n  var k = 0;\n  var checkMask = false;\n  var maskValue = !isNullOrUndefined(maskValues) ? maskValues : !isNullOrUndefined(element) && !isNullOrUndefined(this) ? element.value : maskValues;\n\n  if (maskValue !== this.promptMask) {\n    for (var i = 0; i < this.customRegExpCollec.length; i++) {\n      if (checkMask) {\n        checkMask = false;\n      }\n\n      if (this.customRegExpCollec[k] === '>' || this.customRegExpCollec[k] === '<' || this.customRegExpCollec[k] === '|' || this.customRegExpCollec[k] === '\\\\') {\n        --i;\n        checkMask = true;\n      }\n\n      if (!checkMask) {\n        if (maskValue[i] !== this.promptChar && !isNullOrUndefined(this.customRegExpCollec[k]) && (this._callPasteHandler || !isNullOrUndefined(this.regExpCollec[this.customRegExpCollec[k]]) || this.customRegExpCollec[k].length > 2 && this.customRegExpCollec[k][0] === '[' && this.customRegExpCollec[k][this.customRegExpCollec[k].length - 1] === ']' || !isNullOrUndefined(this.customCharacters) && !isNullOrUndefined(this.customCharacters[this.customRegExpCollec[k]])) && maskValue !== '') {\n          value += maskValue[i];\n        }\n      }\n\n      ++k;\n    }\n  }\n\n  if (this.mask === null || this.mask === '' && this.value !== undefined) {\n    value = maskValue;\n  }\n\n  return value;\n}\n\nfunction pushIntoRegExpCollec(value) {\n  for (var k = 0; k < value.length; k++) {\n    this.hiddenMask += value[k];\n\n    if (value[k] !== '\\\\') {\n      this.customRegExpCollec.push(value[k]);\n    }\n  }\n}\n\nexport function maskInputMouseDownHandler() {\n  this.isClicked = true;\n}\nexport function maskInputMouseUpHandler() {\n  this.isClicked = false;\n}\nexport function maskInputFocusHandler(event) {\n  var _this = this;\n\n  var inputElement = this.element;\n  var startIndex = 0;\n  var modelValue = strippedValue.call(this, inputElement);\n  var toAllowForward = false;\n  var toAllowBackward = false;\n  var eventArgs = {\n    selectionStart: inputElement.selectionStart,\n    event: event,\n    value: this.value,\n    maskedValue: inputElement.value,\n    container: this.inputObj.container,\n    selectionEnd: inputElement.selectionEnd\n  };\n\n  if (!this.isClicked) {\n    this.trigger('focus', eventArgs);\n  }\n\n  if (this.mask) {\n    if (!(!(modelValue === null || modelValue === '') || this.floatLabelType === 'Always' || this.placeholder === null || this.placeholder === '')) {\n      inputElement.value = this.promptMask;\n    }\n\n    setTimeout(function () {\n      if (inputElement.selectionStart === _this.promptMask.length || inputElement.value[inputElement.selectionStart] === _this.promptChar) {\n        toAllowForward = true;\n      } else {\n        for (var i = inputElement.selectionStart; i < _this.promptMask.length; i++) {\n          if (inputElement.value[i] !== _this.promptChar) {\n            if (inputElement.value[i] !== _this.promptMask[i]) {\n              toAllowForward = false;\n              break;\n            }\n          } else {\n            toAllowForward = true;\n            break;\n          }\n        }\n      }\n    });\n    setTimeout(function () {\n      var backSelectionStart = inputElement.selectionStart - 1;\n\n      if (backSelectionStart === _this.promptMask.length - 1 || inputElement.value[backSelectionStart] === _this.promptChar) {\n        toAllowBackward = true;\n      } else {\n        for (var i = backSelectionStart; i >= 0; i--) {\n          if (inputElement.value[i] !== _this.promptChar) {\n            if (inputElement.value[i] !== _this.promptMask[i]) {\n              toAllowBackward = false;\n              break;\n            }\n          } else {\n            toAllowBackward = true;\n            break;\n          }\n        }\n      }\n    });\n\n    if (this.isClicked || this.floatLabelType !== 'Always' && (modelValue === null || modelValue === '') && this.placeholder !== null && this.placeholder !== '') {\n      for (startIndex = 0; startIndex < this.promptMask.length; startIndex++) {\n        if (inputElement.value[startIndex] === this.promptChar) {\n          setTimeout(function () {\n            if (toAllowForward || toAllowBackward) {\n              inputElement.selectionEnd = startIndex;\n              inputElement.selectionStart = startIndex;\n            }\n\n            eventArgs = {\n              selectionStart: inputElement.selectionStart,\n              event: event,\n              value: _this.value,\n              maskedValue: inputElement.value,\n              container: _this.inputObj.container,\n              selectionEnd: inputElement.selectionEnd\n            };\n\n            _this.trigger('focus', eventArgs);\n          });\n          break;\n        }\n      }\n\n      this.isClicked = false;\n    }\n  }\n}\nexport function maskInputBlurHandler(event) {\n  this.blurEventArgs = {\n    event: event,\n    value: this.value,\n    maskedValue: this.element.value,\n    container: this.inputObj.container\n  };\n  this.trigger('blur', this.blurEventArgs);\n\n  if (this.mask) {\n    this.isFocus = false;\n\n    if (this.placeholder && this.element.value === this.promptMask && this.floatLabelType !== 'Always') {\n      setElementValue.call(this, '');\n      var labelElement = this.element.parentNode.querySelector('.e-float-text');\n\n      if (this.floatLabelType === 'Auto' && !isNullOrUndefined(labelElement) && labelElement.classList.contains(TOPLABEL)) {\n        removeClass([labelElement], TOPLABEL);\n      }\n    }\n  }\n}\n\nfunction maskInputPasteHandler(event) {\n  var _this = this;\n\n  if (this.mask && !this.readonly) {\n    var sIndex_1 = this.element.selectionStart;\n    var eIndex_1 = this.element.selectionEnd;\n    var oldValue_1 = this.element.value;\n    setElementValue.call(this, '');\n    this._callPasteHandler = true;\n    setTimeout(function () {\n      var value = _this.element.value.replace(/ /g, '');\n\n      if (_this.redoCollec.length > 0 && _this.redoCollec[0].value === _this.element.value) {\n        value = strippedValue.call(_this, _this.element);\n      }\n\n      setElementValue.call(_this, oldValue_1);\n      _this.element.selectionStart = sIndex_1;\n      _this.element.selectionEnd = eIndex_1;\n      var i = 0;\n      _this.maskKeyPress = true;\n\n      do {\n        validateValue.call(_this, value[i], false, null);\n        ++i;\n      } while (i < value.length);\n\n      _this.maskKeyPress = false;\n      _this._callPasteHandler = false;\n\n      if (_this.element.value === oldValue_1) {\n        var i_1 = 0;\n        _this.maskKeyPress = true;\n\n        do {\n          validateValue.call(_this, value[i_1], false, null);\n          ++i_1;\n        } while (i_1 < value.length);\n\n        _this.maskKeyPress = false;\n      } else {\n        triggerMaskChangeEvent.call(_this, event, oldValue_1);\n      }\n    }, 1);\n  }\n}\n\nfunction maskInputCutHandler(event) {\n  var _this = this;\n\n  if (this.mask && !this.readonly) {\n    var preValue_1 = this.element.value;\n    var sIndex_2 = this.element.selectionStart;\n    var eIndex = this.element.selectionEnd;\n    this.undoCollec.push({\n      value: this.element.value,\n      startIndex: this.element.selectionStart,\n      endIndex: this.element.selectionEnd\n    });\n    var value_1 = this.element.value.substring(0, sIndex_2) + this.promptMask.substring(sIndex_2, eIndex) + this.element.value.substring(eIndex);\n    setTimeout(function () {\n      setElementValue.call(_this, value_1);\n      _this.element.selectionStart = _this.element.selectionEnd = sIndex_2;\n\n      if (_this.element.value !== preValue_1) {\n        triggerMaskChangeEvent.call(_this, event, null);\n      }\n    }, 0);\n  }\n}\n\nexport function maskInputDropHandler(event) {\n  event.preventDefault();\n}\n\nfunction maskInputHandler(event) {\n  if (Browser.isIE === true && this.element.value === '' && this.floatLabelType === 'Never') {\n    return;\n  }\n\n  var eventArgs = {\n    ctrlKey: false,\n    keyCode: 229\n  };\n  extend(event, eventArgs);\n\n  if (this.mask) {\n    if (this.element.value === '') {\n      this.redoCollec.unshift({\n        value: this.promptMask,\n        startIndex: this.element.selectionStart,\n        endIndex: this.element.selectionEnd\n      });\n    }\n\n    if (this.element.value.length === 1) {\n      this.element.value = this.element.value + this.promptMask;\n      this.element.setSelectionRange(1, 1);\n    }\n\n    if (!this._callPasteHandler) {\n      removeMaskInputValues.call(this, event);\n    }\n\n    if (this.element.value.length > this.promptMask.length) {\n      var startIndex = this.element.selectionStart;\n      var addedValues = this.element.value.length - this.promptMask.length;\n      var value = this.element.value.substring(startIndex - addedValues, startIndex);\n      this.maskKeyPress = false;\n      var i = 0;\n\n      do {\n        validateValue.call(this, value[i], event.ctrlKey, event);\n        ++i;\n      } while (i < value.length);\n\n      if (this.element.value !== this.preEleVal) {\n        triggerMaskChangeEvent.call(this, event, null);\n      }\n    }\n\n    var val = strippedValue.call(this, this.element);\n    this.prevValue = val;\n    this.value = val;\n\n    if (val === '') {\n      setElementValue.call(this, this.promptMask);\n      this.element.setSelectionRange(0, 0);\n    }\n  }\n}\n\nfunction maskInputKeyDownHandler(event) {\n  if (this.mask && !this.readonly) {\n    if (event.keyCode !== 229) {\n      if (event.ctrlKey && (event.keyCode === 89 || event.keyCode === 90)) {\n        event.preventDefault();\n      }\n\n      removeMaskInputValues.call(this, event);\n    }\n\n    var startValue = this.element.value;\n\n    if (event.ctrlKey && (event.keyCode === 89 || event.keyCode === 90)) {\n      var collec = void 0;\n\n      if (event.keyCode === 90 && this.undoCollec.length > 0 && startValue !== this.undoCollec[this.undoCollec.length - 1].value) {\n        collec = this.undoCollec[this.undoCollec.length - 1];\n        this.redoCollec.unshift({\n          value: this.element.value,\n          startIndex: this.element.selectionStart,\n          endIndex: this.element.selectionEnd\n        });\n        setElementValue.call(this, collec.value);\n        this.element.selectionStart = collec.startIndex;\n        this.element.selectionEnd = collec.endIndex;\n        this.undoCollec.splice(this.undoCollec.length - 1, 1);\n      } else if (event.keyCode === 89 && this.redoCollec.length > 0 && startValue !== this.redoCollec[0].value) {\n        collec = this.redoCollec[0];\n        this.undoCollec.push({\n          value: this.element.value,\n          startIndex: this.element.selectionStart,\n          endIndex: this.element.selectionEnd\n        });\n        setElementValue.call(this, collec.value);\n        this.element.selectionStart = collec.startIndex;\n        this.element.selectionEnd = collec.endIndex;\n        this.redoCollec.splice(0, 1);\n      }\n    }\n  }\n}\n\nexport function mobileRemoveFunction() {\n  var collec;\n  var sIndex = this.element.selectionStart;\n  var eIndex = this.element.selectionEnd;\n\n  if (this.redoCollec.length > 0) {\n    collec = this.redoCollec[0];\n    setElementValue.call(this, collec.value);\n\n    if (collec.startIndex - sIndex === 1) {\n      this.element.selectionStart = collec.startIndex;\n      this.element.selectionEnd = collec.endIndex;\n    } else {\n      this.element.selectionStart = sIndex + 1;\n      this.element.selectionEnd = eIndex + 1;\n    }\n  } else {\n    setElementValue.call(this, this.promptMask);\n    this.element.selectionStart = this.element.selectionEnd = sIndex;\n  }\n}\n\nfunction autoFillMaskInputValues(isRemove, oldEventVal, event) {\n  if (event.type === 'input') {\n    isRemove = false;\n    oldEventVal = this.element.value;\n    setElementValue.call(this, this.promptMask);\n    setMaskValue.call(this, oldEventVal);\n  }\n\n  return isRemove;\n}\n\nfunction removeMaskInputValues(event) {\n  var isRemove = false;\n  var oldEventVal;\n  var isDeleted = false;\n\n  if (this.element.value.length < this.promptMask.length) {\n    isRemove = true;\n    oldEventVal = this.element.value;\n    isRemove = autoFillMaskInputValues.call(this, isRemove, oldEventVal, event);\n    mobileRemoveFunction.call(this);\n  }\n\n  if (this.element.value.length >= this.promptMask.length && event.type === 'input') {\n    isRemove = autoFillMaskInputValues.call(this, isRemove, oldEventVal, event);\n  }\n\n  var initStartIndex = this.element.selectionStart;\n  var initEndIndex = this.element.selectionEnd;\n  var startIndex = this.element.selectionStart;\n  var endIndex = this.element.selectionEnd;\n  var maskValue = this.hiddenMask.replace(/[>|\\\\<]/g, '');\n  var curMask = maskValue[startIndex - 1];\n  var deleteEndIndex = this.element.selectionEnd;\n\n  if (isRemove || event.keyCode === 8 || event.keyCode === 46) {\n    this.undoCollec.push({\n      value: this.element.value,\n      startIndex: this.element.selectionStart,\n      endIndex: endIndex\n    });\n    var multipleDel = false;\n    var preValue = this.element.value;\n\n    if (startIndex > 0 || (event.keyCode === 8 || event.keyCode === 46) && startIndex < this.element.value.length && this.element.selectionEnd - startIndex !== this.element.value.length) {\n      var index = startIndex;\n\n      if (startIndex !== endIndex) {\n        startIndex = endIndex;\n\n        if (event.keyCode === 46) {\n          multipleDel = true;\n        }\n      } else if (event.keyCode === 46) {\n        ++index;\n      } else {\n        --index;\n      }\n\n      for (var k = startIndex; event.keyCode === 8 || isRemove || multipleDel ? k > index : k < index; event.keyCode === 8 || isRemove || multipleDel ? k-- : k++) {\n        for (var i = startIndex; event.keyCode === 8 || isRemove || multipleDel ? i > 0 : i < this.element.value.length; event.keyCode === 8 || isRemove || multipleDel ? i-- : i++) {\n          var sIndex = void 0;\n\n          if ((event.keyCode === 8 || multipleDel) && (initStartIndex !== initEndIndex && initStartIndex !== startIndex || initStartIndex === initEndIndex) || isRemove) {\n            curMask = maskValue[i - 1];\n            sIndex = startIndex - 1;\n          } else {\n            curMask = maskValue[i];\n            sIndex = startIndex;\n            ++startIndex;\n          }\n\n          var oldValue = this.element.value[sIndex];\n\n          if (isNullOrUndefined(this.regExpCollec[curMask]) && !isNullOrUndefined(this.customCharacters) && isNullOrUndefined(this.customCharacters[curMask]) && this.hiddenMask[sIndex] !== this.promptChar && this.customRegExpCollec[sIndex][0] !== '[' && this.customRegExpCollec[sIndex][this.customRegExpCollec[sIndex].length - 1] !== ']' || this.promptMask[sIndex] !== this.promptChar && isNullOrUndefined(this.customCharacters)) {\n            this.element.selectionStart = this.element.selectionEnd = sIndex;\n            event.preventDefault();\n\n            if (event.keyCode === 46 && !multipleDel) {\n              ++this.element.selectionStart;\n            }\n          } else {\n            var value = this.element.value;\n            var prompt_1 = this.promptChar;\n            var elementValue = value.substring(0, sIndex) + prompt_1 + value.substring(startIndex, value.length);\n            setElementValue.call(this, elementValue);\n            event.preventDefault();\n\n            if (event.keyCode === 46 && !multipleDel) {\n              sIndex++;\n            }\n\n            this.element.selectionStart = this.element.selectionEnd = sIndex;\n            isDeleted = true;\n          }\n\n          startIndex = this.element.selectionStart;\n\n          if (!isDeleted && event.keyCode === 8 || multipleDel || !isDeleted && !(event.keyCode === 46)) {\n            sIndex = startIndex - 1;\n          } else {\n            sIndex = startIndex;\n            isDeleted = false;\n          }\n\n          oldValue = this.element.value[sIndex];\n\n          if (initStartIndex !== initEndIndex && this.element.selectionStart === initStartIndex || this.promptMask[sIndex] === this.promptChar || oldValue !== this.promptMask[sIndex] && this.promptMask[sIndex] !== this.promptChar && !isNullOrUndefined(this.customCharacters)) {\n            break;\n          }\n        }\n      }\n    }\n\n    if (event.keyCode === 46 && multipleDel && isDeleted) {\n      this.element.selectionStart = this.element.selectionEnd = deleteEndIndex;\n    }\n\n    if (this.element.selectionStart === 0 && this.element.selectionEnd === this.element.value.length) {\n      setElementValue.call(this, this.promptMask);\n      event.preventDefault();\n      this.element.selectionStart = this.element.selectionEnd = startIndex;\n    }\n\n    this.redoCollec.unshift({\n      value: this.element.value,\n      startIndex: this.element.selectionStart,\n      endIndex: this.element.selectionEnd\n    });\n\n    if (this.element.value !== preValue) {\n      triggerMaskChangeEvent.call(this, event, oldEventVal);\n    }\n  }\n}\n\nfunction maskInputKeyPressHandler(event) {\n  if (this.mask && !this.readonly) {\n    var oldValue = this.element.value;\n\n    if (!event.ctrlKey || event.ctrlKey && event.code !== 'KeyA' && event.code !== 'KeyY' && event.code !== 'KeyZ' && event.code !== 'KeyX' && event.code !== 'KeyC' && event.code !== 'KeyV') {\n      this.maskKeyPress = true;\n      var key = event.key;\n\n      if (key === 'Spacebar') {\n        key = String.fromCharCode(event.keyCode);\n      }\n\n      if (!key) {\n        this.isIosInvalid = true;\n        validateValue.call(this, String.fromCharCode(event.keyCode), event.ctrlKey, event);\n        event.preventDefault();\n        this.isIosInvalid = false;\n      } else if (key && key.length === 1) {\n        validateValue.call(this, key, event.ctrlKey, event);\n        event.preventDefault();\n      }\n\n      if (event.keyCode === 32 && key === ' ' && this.promptChar === ' ') {\n        this.element.selectionStart = this.element.selectionEnd = this.element.selectionStart - key.length;\n      }\n    }\n\n    if (this.element.value !== oldValue) {\n      triggerMaskChangeEvent.call(this, event, oldValue);\n    }\n  }\n} // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\nfunction triggerMaskChangeEvent(event, oldValue) {\n  var prevOnChange = this.isProtectedOnChange;\n\n  if (!isNullOrUndefined(this.changeEventArgs) && !this.isInitial) {\n    var eventArgs = {};\n    this.changeEventArgs = {\n      value: this.element.value,\n      maskedValue: this.element.value,\n      isInteraction: false,\n      isInteracted: false\n    };\n\n    if (this.mask) {\n      this.changeEventArgs.value = strippedValue.call(this, this.element);\n    }\n\n    if (!isNullOrUndefined(event)) {\n      this.changeEventArgs.isInteracted = true;\n      this.changeEventArgs.isInteraction = true;\n      this.changeEventArgs.event = event;\n    }\n\n    this.isProtectedOnChange = true;\n    this.value = this.changeEventArgs.value;\n    this.isProtectedOnChange = prevOnChange;\n    merge(eventArgs, this.changeEventArgs);\n    /* istanbul ignore next */\n\n    if (this.isAngular && this.preventChange) {\n      this.preventChange = false;\n    } else {\n      this.trigger('change', eventArgs);\n    }\n  }\n\n  this.preEleVal = this.element.value;\n  this.prevValue = strippedValue.call(this, this.element);\n  attributes(this.element, {\n    'aria-valuenow': this.element.value\n  });\n}\n\nfunction maskInputKeyUpHandler(event) {\n  if (this.mask && !this.readonly) {\n    var collec = void 0;\n\n    if (!this.maskKeyPress && event.keyCode === 229) {\n      var oldEventVal = void 0;\n\n      if (this.element.value.length === 1) {\n        this.element.value = this.element.value + this.promptMask;\n        this.element.setSelectionRange(1, 1);\n      }\n\n      if (this.element.value.length > this.promptMask.length) {\n        var startIndex = this.element.selectionStart;\n        var addedValues = this.element.value.length - this.promptMask.length;\n        var val_1 = this.element.value.substring(startIndex - addedValues, startIndex);\n\n        if (this.undoCollec.length > 0) {\n          collec = this.undoCollec[this.undoCollec.length - 1];\n          var startIndex_1 = this.element.selectionStart;\n          oldEventVal = collec.value;\n          var oldVal = collec.value.substring(startIndex_1 - addedValues, startIndex_1);\n          collec = this.redoCollec[0];\n          val_1 = val_1.trim();\n          var isSpace = Browser.isAndroid && val_1 === '';\n\n          if (!isSpace && oldVal !== val_1 && collec.value.substring(startIndex_1 - addedValues, startIndex_1) !== val_1) {\n            validateValue.call(this, val_1, event.ctrlKey, event);\n          } else if (isSpace) {\n            preventUnsupportedValues.call(this, event, startIndex_1 - 1, this.element.selectionEnd - 1, val_1, event.ctrlKey, false);\n          }\n        } else {\n          oldEventVal = this.promptMask;\n          validateValue.call(this, val_1, event.ctrlKey, event);\n        }\n\n        this.maskKeyPress = false;\n        triggerMaskChangeEvent.call(this, event, oldEventVal);\n      }\n    } else {\n      removeMaskError.call(this);\n    }\n\n    var val = strippedValue.call(this, this.element);\n\n    if (!(this.element.selectionStart === 0 && this.promptMask === this.element.value && val === '') || val === '' && this.value !== val) {\n      this.prevValue = val;\n      this.value = val;\n    }\n  } else {\n    triggerMaskChangeEvent.call(this, event);\n  }\n\n  if (this.element.selectionStart === 0 && this.element.selectionEnd === 0) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var temp_1 = this.element;\n    setTimeout(function () {\n      temp_1.setSelectionRange(0, 0);\n    }, 0);\n  }\n}\n\nfunction mobileSwipeCheck(key) {\n  if (key.length > 1 && this.promptMask.length + key.length < this.element.value.length) {\n    var elementValue = this.redoCollec[0].value.substring(0, this.redoCollec[0].startIndex) + key + this.redoCollec[0].value.substring(this.redoCollec[0].startIndex, this.redoCollec[0].value.length);\n    setElementValue.call(this, elementValue);\n    this.element.selectionStart = this.element.selectionEnd = this.redoCollec[0].startIndex + key.length;\n  }\n\n  this.element.selectionStart = this.element.selectionStart - key.length;\n  this.element.selectionEnd = this.element.selectionEnd - key.length;\n}\n\nfunction mobileValidation(key) {\n  if (!this.maskKeyPress) {\n    mobileSwipeCheck.call(this, key);\n  }\n}\n\nfunction validateValue(key, isCtrlKey, event) {\n  mobileValidation.call(this, key);\n\n  if (isNullOrUndefined(this) || isNullOrUndefined(key)) {\n    return;\n  }\n\n  var startIndex = this.element.selectionStart;\n  var initStartIndex = startIndex;\n  var curMask;\n  var allowText = false;\n  var value = this.element.value;\n  var eventOldVal;\n  var prevSupport = false;\n  var isEqualVal = false;\n\n  for (var k = 0; k < key.length; k++) {\n    var keyValue = key[k];\n    startIndex = this.element.selectionStart;\n\n    if (!this.maskKeyPress && initStartIndex === startIndex) {\n      startIndex = startIndex + k;\n    }\n\n    if (!this.maskKeyPress || startIndex < this.promptMask.length) {\n      for (var i = startIndex; i < this.promptMask.length; i++) {\n        var maskValue = this.escapeMaskValue;\n        curMask = maskValue[startIndex];\n\n        if (this.hiddenMask[startIndex] === '\\\\' && this.hiddenMask[startIndex + 1] === key) {\n          isEqualVal = true;\n        }\n\n        if (isNullOrUndefined(this.regExpCollec[curMask]) && (isNullOrUndefined(this.customCharacters) || !isNullOrUndefined(this.customCharacters) && isNullOrUndefined(this.customCharacters[curMask])) && this.hiddenMask[startIndex] !== this.promptChar && this.customRegExpCollec[startIndex][0] !== '[' && this.customRegExpCollec[startIndex][this.customRegExpCollec[startIndex].length - 1] !== ']' || this.promptMask[startIndex] !== this.promptChar && isNullOrUndefined(this.customCharacters) || this.promptChar === curMask && this.escapeMaskValue === this.mask) {\n          this.element.selectionStart = this.element.selectionEnd = startIndex + 1;\n          startIndex = this.element.selectionStart;\n          curMask = this.hiddenMask[startIndex];\n        }\n      }\n\n      if (!isNullOrUndefined(this.customCharacters) && !isNullOrUndefined(this.customCharacters[curMask])) {\n        var customValStr = this.customCharacters[curMask];\n        var customValArr = customValStr.split(',');\n\n        for (var i = 0; i < customValArr.length; i++) {\n          if (keyValue.match(new RegExp('[' + customValArr[i] + ']'))) {\n            allowText = true;\n            break;\n          }\n        }\n      } else if (!isNullOrUndefined(this.regExpCollec[curMask]) && keyValue.match(new RegExp(this.regExpCollec[curMask])) && this.promptMask[startIndex] === this.promptChar) {\n        allowText = true;\n      } else if (this.promptMask[startIndex] === this.promptChar && this.customRegExpCollec[startIndex][0] === '[' && this.customRegExpCollec[startIndex][this.customRegExpCollec[startIndex].length - 1] === ']' && keyValue.match(new RegExp(this.customRegExpCollec[startIndex]))) {\n        allowText = true;\n      }\n\n      if ((!this.maskKeyPress || startIndex < this.hiddenMask.length) && allowText) {\n        if (k === 0) {\n          if (this.maskKeyPress) {\n            this.undoCollec.push({\n              value: value,\n              startIndex: startIndex,\n              endIndex: startIndex\n            });\n          } else {\n            var sIndex = this.element.selectionStart;\n            var eIndex = this.element.selectionEnd;\n\n            if (this.redoCollec.length > 0) {\n              eventOldVal = this.redoCollec[0].value;\n              setElementValue.call(this, eventOldVal);\n              this.undoCollec.push(this.redoCollec[0]);\n            } else {\n              this.undoCollec.push({\n                value: this.promptMask,\n                startIndex: startIndex,\n                endIndex: startIndex\n              });\n              eventOldVal = this.promptMask;\n              setElementValue.call(this, eventOldVal);\n            }\n\n            this.element.selectionStart = sIndex;\n            this.element.selectionEnd = eIndex;\n          }\n        }\n\n        startIndex = this.element.selectionStart;\n        applySupportedValues.call(this, event, startIndex, keyValue, eventOldVal, isEqualVal);\n        prevSupport = true;\n\n        if (k === key.length - 1) {\n          this.redoCollec.unshift({\n            value: this.element.value,\n            startIndex: this.element.selectionStart,\n            endIndex: this.element.selectionEnd\n          });\n        }\n\n        allowText = false;\n      } else {\n        startIndex = this.element.selectionStart;\n        preventUnsupportedValues.call(this, event, startIndex, initStartIndex, key, isCtrlKey, prevSupport);\n      }\n\n      if (k === key.length - 1 && !allowText) {\n        if (!Browser.isAndroid || Browser.isAndroid && startIndex < this.promptMask.length) {\n          this.redoCollec.unshift({\n            value: this.element.value,\n            startIndex: this.element.selectionStart,\n            endIndex: this.element.selectionEnd\n          });\n        }\n      }\n    } else {\n      if (key.length === 1 && !isCtrlKey && !isNullOrUndefined(event)) {\n        addMaskErrorClass.call(this);\n      }\n    }\n  }\n}\n\nfunction applySupportedValues(event, startIndex, keyValue, eventOldVal, isEqualVal) {\n  if (this.hiddenMask.length > this.promptMask.length) {\n    keyValue = changeToLowerUpperCase.call(this, keyValue, this.element.value);\n  }\n\n  if (!isEqualVal) {\n    var value = this.element.value;\n    var elementValue = value.substring(0, startIndex) + keyValue + value.substring(startIndex + 1, value.length);\n    setElementValue.call(this, elementValue);\n    this.element.selectionStart = this.element.selectionEnd = startIndex + 1;\n  }\n}\n\nfunction preventUnsupportedValues(event, sIdx, idx, key, ctrl, chkSupport) {\n  if (!this.maskKeyPress) {\n    var value = this.element.value;\n\n    if (sIdx >= this.promptMask.length) {\n      setElementValue.call(this, value.substring(0, sIdx));\n    } else {\n      if (idx === sIdx) {\n        setElementValue.call(this, value.substring(0, sIdx) + value.substring(sIdx + 1, value.length));\n      } else {\n        if (this.promptMask.length === this.element.value.length) {\n          setElementValue.call(this, value.substring(0, sIdx) + value.substring(sIdx, value.length));\n        } else {\n          setElementValue.call(this, value.substring(0, idx) + value.substring(idx + 1, value.length));\n        }\n      }\n\n      this.element.selectionStart = this.element.selectionEnd = chkSupport || this.element.value[idx] !== this.promptChar ? sIdx : idx;\n    }\n\n    addMaskErrorClass.call(this);\n  }\n\n  if (key.length === 1 && !ctrl && !isNullOrUndefined(event)) {\n    addMaskErrorClass.call(this);\n  }\n}\n\nfunction addMaskErrorClass() {\n  var _this = this;\n\n  var parentElement = this.element.parentNode;\n  var timer = 200;\n\n  if (parentElement.classList.contains(INPUTGROUP) || parentElement.classList.contains(FLOATINPUT)) {\n    addClass([parentElement], ERROR);\n  } else {\n    addClass([this.element], ERROR);\n  }\n\n  if (this.isIosInvalid === true) {\n    timer = 400;\n  }\n\n  attributes(this.element, {\n    'aria-invalid': 'true'\n  });\n  setTimeout(function () {\n    if (!_this.maskKeyPress) {\n      removeMaskError.call(_this);\n    }\n  }, timer);\n}\n\nfunction removeMaskError() {\n  var parentElement = this.element.parentNode;\n\n  if (!isNullOrUndefined(parentElement)) {\n    removeClass([parentElement], ERROR);\n  }\n\n  removeClass([this.element], ERROR);\n  attributes(this.element, {\n    'aria-invalid': 'false'\n  });\n}\n/**\n * Validates user input using masking elements '<' , '>' and '|'.\n *\n * @hidden\n */\n\n\nfunction changeToLowerUpperCase(key, value) {\n  var promptMask;\n  var i;\n  var curVal = value;\n  var caseCount = 0;\n\n  for (i = 0; i < this.hiddenMask.length; i++) {\n    if (this.hiddenMask[i] === '\\\\') {\n      promptMask = curVal.substring(0, i) + '\\\\' + curVal.substring(i, curVal.length);\n    }\n\n    if (this.hiddenMask[i] === '>' || this.hiddenMask[i] === '<' || this.hiddenMask[i] === '|') {\n      if (this.hiddenMask[i] !== curVal[i]) {\n        promptMask = curVal.substring(0, i) + this.hiddenMask[i] + curVal.substring(i, curVal.length);\n      }\n\n      ++caseCount;\n    }\n\n    if (promptMask) {\n      if (promptMask[i] === this.promptChar && i > this.element.selectionStart || this.element.value.indexOf(this.promptChar) < 0 && this.element.selectionStart + caseCount === i) {\n        caseCount = 0;\n        break;\n      }\n\n      curVal = promptMask;\n    }\n  }\n\n  while (i >= 0 && promptMask) {\n    if (i === 0 || promptMask[i - 1] !== '\\\\') {\n      if (promptMask[i] === '>') {\n        key = key.toUpperCase();\n        break;\n      } else if (promptMask[i] === '<') {\n        key = key.toLowerCase();\n        break;\n      } else if (promptMask[i] === '|') {\n        break;\n      }\n    }\n\n    --i;\n  }\n\n  return key;\n}\n/**\n * To set updated values in the MaskedTextBox.\n *\n * @hidden\n */\n\n\nexport function setMaskValue(val) {\n  if (this.mask && val !== undefined && (this.prevValue === undefined || this.prevValue !== val)) {\n    this.maskKeyPress = true;\n    setElementValue.call(this, this.promptMask);\n\n    if (val !== '' && !(val === null && this.floatLabelType === 'Never' && this.placeholder)) {\n      this.element.selectionStart = 0;\n      this.element.selectionEnd = 0;\n    }\n\n    if (val !== null) {\n      for (var i = 0; i < val.length; i++) {\n        validateValue.call(this, val[i], false, null);\n      }\n    }\n\n    var newVal = strippedValue.call(this, this.element);\n    this.prevValue = newVal;\n    this.value = newVal;\n    triggerMaskChangeEvent.call(this, null, null);\n    this.maskKeyPress = false;\n    var labelElement = this.element.parentNode.querySelector('.e-float-text');\n\n    if (this.element.value === this.promptMask && this.floatLabelType === 'Auto' && this.placeholder && !isNullOrUndefined(labelElement) && labelElement.classList.contains(TOPLABEL) && !this.isFocus) {\n      removeClass([labelElement], TOPLABEL);\n      addClass([labelElement], BOTTOMLABEL);\n      setElementValue.call(this, '');\n    }\n  }\n\n  if (this.mask === null || this.mask === '' && this.value !== undefined) {\n    setElementValue.call(this, this.value);\n  }\n}\n/**\n * To set updated values in the input element.\n *\n * @hidden\n */\n\nexport function setElementValue(val, element) {\n  if (!this.isFocus && this.floatLabelType === 'Auto' && this.placeholder && isNullOrUndefined(this.value)) {\n    val = '';\n  }\n\n  var value = strippedValue.call(this, element ? element : this.element, val);\n\n  if (value === null || value === '') {\n    Input.setValue(val, element ? element : this.element, this.floatLabelType, false);\n\n    if (this.showClearButton) {\n      this.inputObj.clearButton.classList.add('e-clear-icon-hide');\n    }\n  } else {\n    Input.setValue(val, element ? element : this.element, this.floatLabelType, this.showClearButton);\n  }\n}\n/**\n * Provide mask support to input textbox through utility method.\n *\n * @hidden\n */\n\nexport function maskInput(args) {\n  var inputEle = getMaskInput(args);\n  applyMask.call(inputEle);\n  var val = strippedValue.call(this, this.element);\n  this.prevValue = val;\n  this.value = val;\n\n  if (args.mask) {\n    unwireEvents.call(inputEle);\n    wireEvents.call(inputEle);\n  }\n}\n\nfunction getMaskInput(args) {\n  addClass([args.element], UTILMASK);\n  var inputEle = {\n    element: args.element,\n    mask: args.mask,\n    promptMask: '',\n    hiddenMask: '',\n    escapeMaskValue: '',\n    promptChar: args.promptChar ? args.promptChar.length > 1 ? args.promptChar = args.promptChar[0] : args.promptChar : '_',\n    value: args.value ? args.value : null,\n    regExpCollec: regularExpressions,\n    customRegExpCollec: [],\n    customCharacters: args.customCharacters,\n    undoCollec: [],\n    redoCollec: [],\n    maskKeyPress: false,\n    prevValue: ''\n  };\n  createMask.call(inputEle);\n  return inputEle;\n}\n/**\n * Gets raw value of the textbox which has been masked through utility method.\n *\n * @hidden\n */\n\n\nexport function getVal(args) {\n  return strippedValue.call(getUtilMaskEle(args), args.element);\n}\n/**\n * Gets masked value of the textbox which has been masked through utility method.\n *\n * @hidden\n */\n\nexport function getMaskedVal(args) {\n  return unstrippedValue.call(getUtilMaskEle(args), args.element);\n}\n\nfunction getUtilMaskEle(args) {\n  var inputEle;\n\n  if (!isNullOrUndefined(args) && args.element.classList.contains(UTILMASK)) {\n    inputEle = getMaskInput(args);\n  }\n\n  return inputEle;\n}\n/**\n * Arguments to perform undo and redo functionalities.\n *\n * @hidden\n */\n\n\nvar MaskUndo =\n/** @class */\nfunction () {\n  function MaskUndo() {}\n\n  return MaskUndo;\n}();\n\nexport { MaskUndo }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\nvar maskUndo = new MaskUndo();\n/* eslint-enable valid-jsdoc, jsdoc/require-jsdoc, jsdoc/require-returns, jsdoc/require-param */","map":{"version":3,"sources":["/Users/kanitttha/comsci - year 4/covid-timeline/node_modules/@syncfusion/ej2-inputs/src/maskedtextbox/base/mask-base.js"],"names":["EventHandler","isNullOrUndefined","merge","attributes","addClass","removeClass","Browser","extend","Input","ERROR","INPUTGROUP","FLOATINPUT","UTILMASK","TOPLABEL","BOTTOMLABEL","regularExpressions","createMask","element","mask","splitMask","split","i","length","splitInnerMask","j","pushIntoRegExpCollec","call","chkSpace","customRegExpCollec","push","hiddenMask","promptChar","escapeMaskValue","promptMask","replace","customCharacters","RegExp","escapeNumber","match","substring","applyMask","setElementValue","setMaskValue","value","wireEvents","add","maskInputKeyDownHandler","maskInputKeyPressHandler","maskInputKeyUpHandler","maskInputHandler","maskInputFocusHandler","maskInputBlurHandler","maskInputPasteHandler","maskInputCutHandler","maskInputDropHandler","maskInputMouseDownHandler","maskInputMouseUpHandler","enabled","bindClearEvent","formElement","resetFormHandler","unwireEvents","remove","showClearButton","inputObj","clearButton","resetHandler","e","preventDefault","classList","contains","clear","event","redoCollec","unshift","startIndex","selectionStart","endIndex","selectionEnd","triggerMaskChangeEvent","setSelectionRange","tagName","initInputValue","unstrippedValue","strippedValue","maskValues","k","checkMask","maskValue","_callPasteHandler","regExpCollec","undefined","isClicked","_this","inputElement","modelValue","toAllowForward","toAllowBackward","eventArgs","maskedValue","container","trigger","floatLabelType","placeholder","setTimeout","backSelectionStart","blurEventArgs","isFocus","labelElement","parentNode","querySelector","readonly","sIndex_1","eIndex_1","oldValue_1","maskKeyPress","validateValue","i_1","preValue_1","sIndex_2","eIndex","undoCollec","value_1","isIE","ctrlKey","keyCode","removeMaskInputValues","addedValues","preEleVal","val","prevValue","startValue","collec","splice","mobileRemoveFunction","sIndex","autoFillMaskInputValues","isRemove","oldEventVal","type","isDeleted","initStartIndex","initEndIndex","curMask","deleteEndIndex","multipleDel","preValue","index","oldValue","prompt_1","elementValue","code","key","String","fromCharCode","isIosInvalid","prevOnChange","isProtectedOnChange","changeEventArgs","isInitial","isInteraction","isInteracted","isAngular","preventChange","val_1","startIndex_1","oldVal","trim","isSpace","isAndroid","preventUnsupportedValues","removeMaskError","temp_1","mobileSwipeCheck","mobileValidation","isCtrlKey","allowText","eventOldVal","prevSupport","isEqualVal","keyValue","customValStr","customValArr","applySupportedValues","addMaskErrorClass","changeToLowerUpperCase","sIdx","idx","ctrl","chkSupport","parentElement","timer","curVal","caseCount","indexOf","toUpperCase","toLowerCase","newVal","setValue","maskInput","args","inputEle","getMaskInput","getVal","getUtilMaskEle","getMaskedVal","MaskUndo","maskUndo"],"mappings":"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","sourcesContent":["/* eslint-disable valid-jsdoc, jsdoc/require-jsdoc, jsdoc/require-returns, jsdoc/require-param */\n/**\n * MaskedTextBox base module\n */\nimport { EventHandler, isNullOrUndefined, merge, attributes, addClass, removeClass, Browser, extend } from '@syncfusion/ej2-base';\nimport { Input } from '../../input/input';\nvar ERROR = 'e-error';\nvar INPUTGROUP = 'e-input-group';\nvar FLOATINPUT = 'e-float-input';\nvar UTILMASK = 'e-utility-mask';\nvar TOPLABEL = 'e-label-top';\nvar BOTTOMLABEL = 'e-label-bottom';\n/**\n * @hidden\n * Built-in masking elements collection.\n */\nexport var regularExpressions = {\n    '0': '[0-9]',\n    '9': '[0-9 ]',\n    '#': '[0-9 +-]',\n    'L': '[A-Za-z]',\n    '?': '[A-Za-z ]',\n    '&': '[^\\x7f ]+',\n    'C': '[^\\x7f]+',\n    'A': '[A-Za-z0-9]',\n    'a': '[A-Za-z0-9 ]'\n};\n/**\n * Generate required masking elements to the MaskedTextBox from user mask input.\n *\n * @hidden\n */\nexport function createMask() {\n    attributes(this.element, {\n        'role': 'textbox', 'autocomplete': 'off', 'autocorrect': 'off', 'autocapitalize': 'off',\n        'spellcheck': 'false', 'aria-live': 'assertive', 'aria-valuenow': ''\n    });\n    if (this.mask) {\n        var splitMask = this.mask.split(']');\n        for (var i = 0; i < splitMask.length; i++) {\n            if (splitMask[i][splitMask[i].length - 1] === '\\\\') {\n                splitMask[i] = splitMask[i] + ']';\n                var splitInnerMask = splitMask[i].split('[');\n                for (var j = 0; j < splitInnerMask.length; j++) {\n                    if (splitInnerMask[j][splitInnerMask[j].length - 1] === '\\\\') {\n                        splitInnerMask[j] = splitInnerMask[j] + '[';\n                    }\n                    pushIntoRegExpCollec.call(this, splitInnerMask[j]);\n                }\n            }\n            else {\n                var splitInnerMask = splitMask[i].split('[');\n                if (splitInnerMask.length > 1) {\n                    var chkSpace = false;\n                    for (var j = 0; j < splitInnerMask.length; j++) {\n                        if (splitInnerMask[j] === '\\\\') {\n                            this.customRegExpCollec.push('[');\n                            this.hiddenMask += splitInnerMask[j] + '[';\n                        }\n                        else if (splitInnerMask[j] === '') {\n                            chkSpace = true;\n                        }\n                        else if ((splitInnerMask[j] !== '' && chkSpace) || j === splitInnerMask.length - 1) {\n                            this.customRegExpCollec.push('[' + splitInnerMask[j] + ']');\n                            this.hiddenMask += this.promptChar;\n                            chkSpace = false;\n                        }\n                        else {\n                            pushIntoRegExpCollec.call(this, splitInnerMask[j]);\n                        }\n                    }\n                }\n                else {\n                    pushIntoRegExpCollec.call(this, splitInnerMask[0]);\n                }\n            }\n        }\n        this.escapeMaskValue = this.hiddenMask;\n        this.promptMask = this.hiddenMask.replace(/[09?LCAa#&]/g, this.promptChar);\n        if (!isNullOrUndefined(this.customCharacters)) {\n            for (var i = 0; i < this.promptMask.length; i++) {\n                if (!isNullOrUndefined(this.customCharacters[this.promptMask[i]])) {\n                    this.promptMask = this.promptMask.replace(new RegExp(this.promptMask[i], 'g'), this.promptChar);\n                }\n            }\n        }\n        var escapeNumber = 0;\n        if (this.hiddenMask.match(new RegExp(/\\\\/))) {\n            for (var i = 0; i < this.hiddenMask.length; i++) {\n                var j = 0;\n                if (i >= 1) {\n                    j = i;\n                }\n                escapeNumber = this.hiddenMask.length - this.promptMask.length;\n                j = j - escapeNumber;\n                if ((i > 0 && this.hiddenMask[i - 1] !== '\\\\') && (this.hiddenMask[i] === '>' ||\n                    this.hiddenMask[i] === '<' || this.hiddenMask[i] === '|')) {\n                    this.promptMask = this.promptMask.substring(0, j) +\n                        this.promptMask.substring((i + 1) - escapeNumber, this.promptMask.length);\n                    this.escapeMaskValue = this.escapeMaskValue.substring(0, j) +\n                        this.escapeMaskValue.substring((i + 1) - escapeNumber, this.escapeMaskValue.length);\n                }\n                if (this.hiddenMask[i] === '\\\\') {\n                    this.promptMask = this.promptMask.substring(0, j) + this.hiddenMask[i + 1] +\n                        this.promptMask.substring((i + 2) - escapeNumber, this.promptMask.length);\n                    this.escapeMaskValue = this.escapeMaskValue.substring(0, j) + this.escapeMaskValue[i + 1] +\n                        this.escapeMaskValue.substring((i + 2) - escapeNumber, this.escapeMaskValue.length);\n                }\n            }\n        }\n        else {\n            this.promptMask = this.promptMask.replace(/[>|<]/g, '');\n            this.escapeMaskValue = this.hiddenMask.replace(/[>|<]/g, '');\n        }\n        attributes(this.element, { 'aria-invalid': 'false' });\n    }\n}\n/**\n * Apply mask ability with masking elements to the MaskedTextBox.\n *\n * @hidden\n */\nexport function applyMask() {\n    setElementValue.call(this, this.promptMask);\n    setMaskValue.call(this, this.value);\n}\n/**\n * To wire required events to the MaskedTextBox.\n *\n * @hidden\n */\nexport function wireEvents() {\n    EventHandler.add(this.element, 'keydown', maskInputKeyDownHandler, this);\n    EventHandler.add(this.element, 'keypress', maskInputKeyPressHandler, this);\n    EventHandler.add(this.element, 'keyup', maskInputKeyUpHandler, this);\n    EventHandler.add(this.element, 'input', maskInputHandler, this);\n    EventHandler.add(this.element, 'focus', maskInputFocusHandler, this);\n    EventHandler.add(this.element, 'blur', maskInputBlurHandler, this);\n    EventHandler.add(this.element, 'paste', maskInputPasteHandler, this);\n    EventHandler.add(this.element, 'cut', maskInputCutHandler, this);\n    EventHandler.add(this.element, 'drop', maskInputDropHandler, this);\n    EventHandler.add(this.element, 'mousedown', maskInputMouseDownHandler, this);\n    EventHandler.add(this.element, 'mouseup', maskInputMouseUpHandler, this);\n    if (this.enabled) {\n        bindClearEvent.call(this);\n        if (this.formElement) {\n            EventHandler.add(this.formElement, 'reset', resetFormHandler, this);\n        }\n    }\n}\n/**\n * To unwire events attached to the MaskedTextBox.\n *\n * @hidden\n */\nexport function unwireEvents() {\n    EventHandler.remove(this.element, 'keydown', maskInputKeyDownHandler);\n    EventHandler.remove(this.element, 'keypress', maskInputKeyPressHandler);\n    EventHandler.remove(this.element, 'keyup', maskInputKeyUpHandler);\n    EventHandler.remove(this.element, 'input', maskInputHandler);\n    EventHandler.remove(this.element, 'focus', maskInputFocusHandler);\n    EventHandler.remove(this.element, 'blur', maskInputBlurHandler);\n    EventHandler.remove(this.element, 'paste', maskInputPasteHandler);\n    EventHandler.remove(this.element, 'cut', maskInputCutHandler);\n    EventHandler.remove(this.element, 'mousedown', maskInputMouseDownHandler);\n    EventHandler.remove(this.element, 'mouseup', maskInputMouseUpHandler);\n    if (this.formElement) {\n        EventHandler.remove(this.formElement, 'reset', resetFormHandler);\n    }\n}\n/**\n * To bind required events to the MaskedTextBox clearButton.\n *\n * @hidden\n */\nexport function bindClearEvent() {\n    if (this.showClearButton) {\n        EventHandler.add(this.inputObj.clearButton, 'mousedown touchstart', resetHandler, this);\n    }\n}\nfunction resetHandler(e) {\n    e.preventDefault();\n    if (!this.inputObj.clearButton.classList.contains('e-clear-icon-hide')) {\n        clear.call(this, e);\n        this.value = '';\n    }\n}\nfunction clear(event) {\n    var value = this.element.value;\n    setElementValue.call(this, this.promptMask);\n    this.redoCollec.unshift({\n        value: this.promptMask, startIndex: this.element.selectionStart, endIndex: this.element.selectionEnd\n    });\n    triggerMaskChangeEvent.call(this, event, value);\n    this.element.setSelectionRange(0, 0);\n}\nfunction resetFormHandler() {\n    if (this.element.tagName === 'EJS-MASKEDTEXTBOX') {\n        setElementValue.call(this, this.promptMask);\n    }\n    else {\n        this.value = this.initInputValue;\n    }\n}\n/**\n * To get masked value from the MaskedTextBox.\n *\n * @hidden\n */\nexport function unstrippedValue(element) {\n    return element.value;\n}\n/**\n * To extract raw value from the MaskedTextBox.\n *\n * @hidden\n */\nexport function strippedValue(element, maskValues) {\n    var value = '';\n    var k = 0;\n    var checkMask = false;\n    var maskValue = (!isNullOrUndefined(maskValues)) ? maskValues : (!isNullOrUndefined(element) &&\n        !isNullOrUndefined(this)) ? element.value : maskValues;\n    if (maskValue !== this.promptMask) {\n        for (var i = 0; i < this.customRegExpCollec.length; i++) {\n            if (checkMask) {\n                checkMask = false;\n            }\n            if (this.customRegExpCollec[k] === '>' || this.customRegExpCollec[k] === '<' ||\n                this.customRegExpCollec[k] === '|' || this.customRegExpCollec[k] === '\\\\') {\n                --i;\n                checkMask = true;\n            }\n            if (!checkMask) {\n                if ((maskValue[i] !== this.promptChar) && (!isNullOrUndefined(this.customRegExpCollec[k]) &&\n                    ((this._callPasteHandler || !isNullOrUndefined(this.regExpCollec[this.customRegExpCollec[k]])) ||\n                        (this.customRegExpCollec[k].length > 2 && this.customRegExpCollec[k][0] === '[' &&\n                            this.customRegExpCollec[k][this.customRegExpCollec[k].length - 1] === ']') ||\n                        (!isNullOrUndefined(this.customCharacters) &&\n                            (!isNullOrUndefined(this.customCharacters[this.customRegExpCollec[k]]))))) && (maskValue !== '')) {\n                    value += maskValue[i];\n                }\n            }\n            ++k;\n        }\n    }\n    if (this.mask === null || this.mask === '' && this.value !== undefined) {\n        value = maskValue;\n    }\n    return value;\n}\nfunction pushIntoRegExpCollec(value) {\n    for (var k = 0; k < value.length; k++) {\n        this.hiddenMask += value[k];\n        if (value[k] !== '\\\\') {\n            this.customRegExpCollec.push(value[k]);\n        }\n    }\n}\nexport function maskInputMouseDownHandler() {\n    this.isClicked = true;\n}\nexport function maskInputMouseUpHandler() {\n    this.isClicked = false;\n}\nexport function maskInputFocusHandler(event) {\n    var _this = this;\n    var inputElement = this.element;\n    var startIndex = 0;\n    var modelValue = strippedValue.call(this, inputElement);\n    var toAllowForward = false;\n    var toAllowBackward = false;\n    var eventArgs = {\n        selectionStart: inputElement.selectionStart,\n        event: event,\n        value: this.value,\n        maskedValue: inputElement.value,\n        container: this.inputObj.container,\n        selectionEnd: inputElement.selectionEnd\n    };\n    if (!this.isClicked) {\n        this.trigger('focus', eventArgs);\n    }\n    if (this.mask) {\n        if (!(!(modelValue === null || modelValue === '') || this.floatLabelType === 'Always' ||\n            this.placeholder === null || this.placeholder === '')) {\n            inputElement.value = this.promptMask;\n        }\n        setTimeout(function () {\n            if (inputElement.selectionStart === _this.promptMask.length ||\n                inputElement.value[inputElement.selectionStart] === _this.promptChar) {\n                toAllowForward = true;\n            }\n            else {\n                for (var i = inputElement.selectionStart; i < _this.promptMask.length; i++) {\n                    if (inputElement.value[i] !== _this.promptChar) {\n                        if ((inputElement.value[i] !== _this.promptMask[i])) {\n                            toAllowForward = false;\n                            break;\n                        }\n                    }\n                    else {\n                        toAllowForward = true;\n                        break;\n                    }\n                }\n            }\n        });\n        setTimeout(function () {\n            var backSelectionStart = inputElement.selectionStart - 1;\n            if (backSelectionStart === _this.promptMask.length - 1 ||\n                inputElement.value[backSelectionStart] === _this.promptChar) {\n                toAllowBackward = true;\n            }\n            else {\n                for (var i = backSelectionStart; i >= 0; i--) {\n                    if (inputElement.value[i] !== _this.promptChar) {\n                        if ((inputElement.value[i] !== _this.promptMask[i])) {\n                            toAllowBackward = false;\n                            break;\n                        }\n                    }\n                    else {\n                        toAllowBackward = true;\n                        break;\n                    }\n                }\n            }\n        });\n        if ((this.isClicked || (this.floatLabelType !== 'Always' &&\n            ((modelValue === null || modelValue === '') &&\n                (this.placeholder !== null && this.placeholder !== ''))))) {\n            for (startIndex = 0; startIndex < this.promptMask.length; startIndex++) {\n                if (inputElement.value[startIndex] === this.promptChar) {\n                    setTimeout(function () {\n                        if (toAllowForward || toAllowBackward) {\n                            inputElement.selectionEnd = startIndex;\n                            inputElement.selectionStart = startIndex;\n                        }\n                        eventArgs = {\n                            selectionStart: inputElement.selectionStart,\n                            event: event,\n                            value: _this.value,\n                            maskedValue: inputElement.value,\n                            container: _this.inputObj.container,\n                            selectionEnd: inputElement.selectionEnd\n                        };\n                        _this.trigger('focus', eventArgs);\n                    });\n                    break;\n                }\n            }\n            this.isClicked = false;\n        }\n    }\n}\nexport function maskInputBlurHandler(event) {\n    this.blurEventArgs = {\n        event: event,\n        value: this.value,\n        maskedValue: this.element.value,\n        container: this.inputObj.container\n    };\n    this.trigger('blur', this.blurEventArgs);\n    if (this.mask) {\n        this.isFocus = false;\n        if (this.placeholder && this.element.value === this.promptMask && this.floatLabelType !== 'Always') {\n            setElementValue.call(this, '');\n            var labelElement = this.element.parentNode.querySelector('.e-float-text');\n            if (this.floatLabelType === 'Auto' && !isNullOrUndefined(labelElement) && labelElement.classList.contains(TOPLABEL)) {\n                removeClass([labelElement], TOPLABEL);\n            }\n        }\n    }\n}\nfunction maskInputPasteHandler(event) {\n    var _this = this;\n    if (this.mask && !this.readonly) {\n        var sIndex_1 = this.element.selectionStart;\n        var eIndex_1 = this.element.selectionEnd;\n        var oldValue_1 = this.element.value;\n        setElementValue.call(this, '');\n        this._callPasteHandler = true;\n        setTimeout(function () {\n            var value = _this.element.value.replace(/ /g, '');\n            if (_this.redoCollec.length > 0 && _this.redoCollec[0].value === _this.element.value) {\n                value = strippedValue.call(_this, _this.element);\n            }\n            setElementValue.call(_this, oldValue_1);\n            _this.element.selectionStart = sIndex_1;\n            _this.element.selectionEnd = eIndex_1;\n            var i = 0;\n            _this.maskKeyPress = true;\n            do {\n                validateValue.call(_this, value[i], false, null);\n                ++i;\n            } while (i < value.length);\n            _this.maskKeyPress = false;\n            _this._callPasteHandler = false;\n            if (_this.element.value === oldValue_1) {\n                var i_1 = 0;\n                _this.maskKeyPress = true;\n                do {\n                    validateValue.call(_this, value[i_1], false, null);\n                    ++i_1;\n                } while (i_1 < value.length);\n                _this.maskKeyPress = false;\n            }\n            else {\n                triggerMaskChangeEvent.call(_this, event, oldValue_1);\n            }\n        }, 1);\n    }\n}\nfunction maskInputCutHandler(event) {\n    var _this = this;\n    if (this.mask && !this.readonly) {\n        var preValue_1 = this.element.value;\n        var sIndex_2 = this.element.selectionStart;\n        var eIndex = this.element.selectionEnd;\n        this.undoCollec.push({ value: this.element.value, startIndex: this.element.selectionStart, endIndex: this.element.selectionEnd });\n        var value_1 = this.element.value.substring(0, sIndex_2) + this.promptMask.substring(sIndex_2, eIndex) +\n            this.element.value.substring(eIndex);\n        setTimeout(function () {\n            setElementValue.call(_this, value_1);\n            _this.element.selectionStart = _this.element.selectionEnd = sIndex_2;\n            if (_this.element.value !== preValue_1) {\n                triggerMaskChangeEvent.call(_this, event, null);\n            }\n        }, 0);\n    }\n}\nexport function maskInputDropHandler(event) {\n    event.preventDefault();\n}\nfunction maskInputHandler(event) {\n    if (Browser.isIE === true && this.element.value === '' && this.floatLabelType === 'Never') {\n        return;\n    }\n    var eventArgs = { ctrlKey: false, keyCode: 229 };\n    extend(event, eventArgs);\n    if (this.mask) {\n        if (this.element.value === '') {\n            this.redoCollec.unshift({\n                value: this.promptMask, startIndex: this.element.selectionStart, endIndex: this.element.selectionEnd\n            });\n        }\n        if (this.element.value.length === 1) {\n            this.element.value = this.element.value + this.promptMask;\n            this.element.setSelectionRange(1, 1);\n        }\n        if (!this._callPasteHandler) {\n            removeMaskInputValues.call(this, event);\n        }\n        if (this.element.value.length > this.promptMask.length) {\n            var startIndex = this.element.selectionStart;\n            var addedValues = this.element.value.length - this.promptMask.length;\n            var value = this.element.value.substring(startIndex - addedValues, startIndex);\n            this.maskKeyPress = false;\n            var i = 0;\n            do {\n                validateValue.call(this, value[i], event.ctrlKey, event);\n                ++i;\n            } while (i < value.length);\n            if (this.element.value !== this.preEleVal) {\n                triggerMaskChangeEvent.call(this, event, null);\n            }\n        }\n        var val = strippedValue.call(this, this.element);\n        this.prevValue = val;\n        this.value = val;\n        if (val === '') {\n            setElementValue.call(this, this.promptMask);\n            this.element.setSelectionRange(0, 0);\n        }\n    }\n}\nfunction maskInputKeyDownHandler(event) {\n    if (this.mask && !this.readonly) {\n        if (event.keyCode !== 229) {\n            if (event.ctrlKey && (event.keyCode === 89 || event.keyCode === 90)) {\n                event.preventDefault();\n            }\n            removeMaskInputValues.call(this, event);\n        }\n        var startValue = this.element.value;\n        if (event.ctrlKey && (event.keyCode === 89 || event.keyCode === 90)) {\n            var collec = void 0;\n            if (event.keyCode === 90 && this.undoCollec.length > 0 && startValue !== this.undoCollec[this.undoCollec.length - 1].value) {\n                collec = this.undoCollec[this.undoCollec.length - 1];\n                this.redoCollec.unshift({\n                    value: this.element.value, startIndex: this.element.selectionStart,\n                    endIndex: this.element.selectionEnd\n                });\n                setElementValue.call(this, collec.value);\n                this.element.selectionStart = collec.startIndex;\n                this.element.selectionEnd = collec.endIndex;\n                this.undoCollec.splice(this.undoCollec.length - 1, 1);\n            }\n            else if (event.keyCode === 89 && this.redoCollec.length > 0 && startValue !== this.redoCollec[0].value) {\n                collec = this.redoCollec[0];\n                this.undoCollec.push({\n                    value: this.element.value, startIndex: this.element.selectionStart,\n                    endIndex: this.element.selectionEnd\n                });\n                setElementValue.call(this, collec.value);\n                this.element.selectionStart = collec.startIndex;\n                this.element.selectionEnd = collec.endIndex;\n                this.redoCollec.splice(0, 1);\n            }\n        }\n    }\n}\nexport function mobileRemoveFunction() {\n    var collec;\n    var sIndex = this.element.selectionStart;\n    var eIndex = this.element.selectionEnd;\n    if (this.redoCollec.length > 0) {\n        collec = this.redoCollec[0];\n        setElementValue.call(this, collec.value);\n        if ((collec.startIndex - sIndex) === 1) {\n            this.element.selectionStart = collec.startIndex;\n            this.element.selectionEnd = collec.endIndex;\n        }\n        else {\n            this.element.selectionStart = sIndex + 1;\n            this.element.selectionEnd = eIndex + 1;\n        }\n    }\n    else {\n        setElementValue.call(this, this.promptMask);\n        this.element.selectionStart = this.element.selectionEnd = sIndex;\n    }\n}\nfunction autoFillMaskInputValues(isRemove, oldEventVal, event) {\n    if (event.type === 'input') {\n        isRemove = false;\n        oldEventVal = this.element.value;\n        setElementValue.call(this, this.promptMask);\n        setMaskValue.call(this, oldEventVal);\n    }\n    return isRemove;\n}\nfunction removeMaskInputValues(event) {\n    var isRemove = false;\n    var oldEventVal;\n    var isDeleted = false;\n    if (this.element.value.length < this.promptMask.length) {\n        isRemove = true;\n        oldEventVal = this.element.value;\n        isRemove = autoFillMaskInputValues.call(this, isRemove, oldEventVal, event);\n        mobileRemoveFunction.call(this);\n    }\n    if (this.element.value.length >= this.promptMask.length && event.type === 'input') {\n        isRemove = autoFillMaskInputValues.call(this, isRemove, oldEventVal, event);\n    }\n    var initStartIndex = this.element.selectionStart;\n    var initEndIndex = this.element.selectionEnd;\n    var startIndex = this.element.selectionStart;\n    var endIndex = this.element.selectionEnd;\n    var maskValue = this.hiddenMask.replace(/[>|\\\\<]/g, '');\n    var curMask = maskValue[startIndex - 1];\n    var deleteEndIndex = this.element.selectionEnd;\n    if (isRemove || event.keyCode === 8 || event.keyCode === 46) {\n        this.undoCollec.push({ value: this.element.value, startIndex: this.element.selectionStart, endIndex: endIndex });\n        var multipleDel = false;\n        var preValue = this.element.value;\n        if (startIndex > 0 || ((event.keyCode === 8 || event.keyCode === 46) && startIndex < this.element.value.length\n            && ((this.element.selectionEnd - startIndex) !== this.element.value.length))) {\n            var index = startIndex;\n            if (startIndex !== endIndex) {\n                startIndex = endIndex;\n                if (event.keyCode === 46) {\n                    multipleDel = true;\n                }\n            }\n            else if (event.keyCode === 46) {\n                ++index;\n            }\n            else {\n                --index;\n            }\n            for (var k = startIndex; (event.keyCode === 8 || isRemove || multipleDel) ? k > index : k < index; (event.keyCode === 8 || isRemove || multipleDel) ? k-- : k++) {\n                for (var i = startIndex; (event.keyCode === 8 || isRemove || multipleDel) ? i > 0 : i < this.element.value.length; (event.keyCode === 8 || isRemove || multipleDel) ? i-- : i++) {\n                    var sIndex = void 0;\n                    if (((event.keyCode === 8 || multipleDel) && ((initStartIndex !== initEndIndex && initStartIndex !== startIndex) ||\n                        (initStartIndex === initEndIndex))) || isRemove) {\n                        curMask = maskValue[i - 1];\n                        sIndex = startIndex - 1;\n                    }\n                    else {\n                        curMask = maskValue[i];\n                        sIndex = startIndex;\n                        ++startIndex;\n                    }\n                    var oldValue = this.element.value[sIndex];\n                    if ((isNullOrUndefined(this.regExpCollec[curMask]) && (!isNullOrUndefined(this.customCharacters)\n                        && isNullOrUndefined(this.customCharacters[curMask]))\n                        && ((this.hiddenMask[sIndex] !== this.promptChar && this.customRegExpCollec[sIndex][0] !== '['\n                            && this.customRegExpCollec[sIndex][this.customRegExpCollec[sIndex].length - 1] !== ']')))\n                        || (this.promptMask[sIndex] !== this.promptChar && isNullOrUndefined(this.customCharacters))) {\n                        this.element.selectionStart = this.element.selectionEnd = sIndex;\n                        event.preventDefault();\n                        if (event.keyCode === 46 && !multipleDel) {\n                            ++this.element.selectionStart;\n                        }\n                    }\n                    else {\n                        var value = this.element.value;\n                        var prompt_1 = this.promptChar;\n                        var elementValue = value.substring(0, sIndex) + prompt_1 + value.substring(startIndex, value.length);\n                        setElementValue.call(this, elementValue);\n                        event.preventDefault();\n                        if (event.keyCode === 46 && !multipleDel) {\n                            sIndex++;\n                        }\n                        this.element.selectionStart = this.element.selectionEnd = sIndex;\n                        isDeleted = true;\n                    }\n                    startIndex = this.element.selectionStart;\n                    if ((!isDeleted && event.keyCode === 8) || multipleDel || (!isDeleted && !(event.keyCode === 46))) {\n                        sIndex = startIndex - 1;\n                    }\n                    else {\n                        sIndex = startIndex;\n                        isDeleted = false;\n                    }\n                    oldValue = this.element.value[sIndex];\n                    if (((initStartIndex !== initEndIndex) && (this.element.selectionStart === initStartIndex))\n                        || (this.promptMask[sIndex] === this.promptChar) || ((oldValue !== this.promptMask[sIndex]) &&\n                        (this.promptMask[sIndex] !== this.promptChar) && !isNullOrUndefined(this.customCharacters))) {\n                        break;\n                    }\n                }\n            }\n        }\n        if (event.keyCode === 46 && multipleDel && isDeleted) {\n            this.element.selectionStart = this.element.selectionEnd = deleteEndIndex;\n        }\n        if (this.element.selectionStart === 0 && (this.element.selectionEnd === this.element.value.length)) {\n            setElementValue.call(this, this.promptMask);\n            event.preventDefault();\n            this.element.selectionStart = this.element.selectionEnd = startIndex;\n        }\n        this.redoCollec.unshift({\n            value: this.element.value, startIndex: this.element.selectionStart,\n            endIndex: this.element.selectionEnd\n        });\n        if (this.element.value !== preValue) {\n            triggerMaskChangeEvent.call(this, event, oldEventVal);\n        }\n    }\n}\nfunction maskInputKeyPressHandler(event) {\n    if (this.mask && !this.readonly) {\n        var oldValue = this.element.value;\n        if ((!event.ctrlKey) || (event.ctrlKey && event.code !== 'KeyA' && event.code !== 'KeyY'\n            && event.code !== 'KeyZ' && event.code !== 'KeyX' && event.code !== 'KeyC' && event.code !== 'KeyV')) {\n            this.maskKeyPress = true;\n            var key = event.key;\n            if (key === 'Spacebar') {\n                key = String.fromCharCode(event.keyCode);\n            }\n            if (!key) {\n                this.isIosInvalid = true;\n                validateValue.call(this, String.fromCharCode(event.keyCode), event.ctrlKey, event);\n                event.preventDefault();\n                this.isIosInvalid = false;\n            }\n            else if (key && key.length === 1) {\n                validateValue.call(this, key, event.ctrlKey, event);\n                event.preventDefault();\n            }\n            if (event.keyCode === 32 && key === ' ' && this.promptChar === ' ') {\n                this.element.selectionStart = this.element.selectionEnd = this.element.selectionStart - key.length;\n            }\n        }\n        if (this.element.value !== oldValue) {\n            triggerMaskChangeEvent.call(this, event, oldValue);\n        }\n    }\n}\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nfunction triggerMaskChangeEvent(event, oldValue) {\n    var prevOnChange = this.isProtectedOnChange;\n    if (!isNullOrUndefined(this.changeEventArgs) && !this.isInitial) {\n        var eventArgs = {};\n        this.changeEventArgs = { value: this.element.value, maskedValue: this.element.value, isInteraction: false, isInteracted: false };\n        if (this.mask) {\n            this.changeEventArgs.value = strippedValue.call(this, this.element);\n        }\n        if (!isNullOrUndefined(event)) {\n            this.changeEventArgs.isInteracted = true;\n            this.changeEventArgs.isInteraction = true;\n            this.changeEventArgs.event = event;\n        }\n        this.isProtectedOnChange = true;\n        this.value = this.changeEventArgs.value;\n        this.isProtectedOnChange = prevOnChange;\n        merge(eventArgs, this.changeEventArgs);\n        /* istanbul ignore next */\n        if (this.isAngular && this.preventChange) {\n            this.preventChange = false;\n        }\n        else {\n            this.trigger('change', eventArgs);\n        }\n    }\n    this.preEleVal = this.element.value;\n    this.prevValue = strippedValue.call(this, this.element);\n    attributes(this.element, { 'aria-valuenow': this.element.value });\n}\nfunction maskInputKeyUpHandler(event) {\n    if (this.mask && !this.readonly) {\n        var collec = void 0;\n        if (!this.maskKeyPress && event.keyCode === 229) {\n            var oldEventVal = void 0;\n            if (this.element.value.length === 1) {\n                this.element.value = this.element.value + this.promptMask;\n                this.element.setSelectionRange(1, 1);\n            }\n            if (this.element.value.length > this.promptMask.length) {\n                var startIndex = this.element.selectionStart;\n                var addedValues = this.element.value.length - this.promptMask.length;\n                var val_1 = this.element.value.substring(startIndex - addedValues, startIndex);\n                if (this.undoCollec.length > 0) {\n                    collec = this.undoCollec[this.undoCollec.length - 1];\n                    var startIndex_1 = this.element.selectionStart;\n                    oldEventVal = collec.value;\n                    var oldVal = collec.value.substring(startIndex_1 - addedValues, startIndex_1);\n                    collec = this.redoCollec[0];\n                    val_1 = val_1.trim();\n                    var isSpace = Browser.isAndroid && val_1 === '';\n                    if (!isSpace && oldVal !== val_1 && collec.value.substring(startIndex_1 - addedValues, startIndex_1) !== val_1) {\n                        validateValue.call(this, val_1, event.ctrlKey, event);\n                    }\n                    else if (isSpace) {\n                        preventUnsupportedValues.call(this, event, startIndex_1 - 1, this.element.selectionEnd - 1, val_1, event.ctrlKey, false);\n                    }\n                }\n                else {\n                    oldEventVal = this.promptMask;\n                    validateValue.call(this, val_1, event.ctrlKey, event);\n                }\n                this.maskKeyPress = false;\n                triggerMaskChangeEvent.call(this, event, oldEventVal);\n            }\n        }\n        else {\n            removeMaskError.call(this);\n        }\n        var val = strippedValue.call(this, this.element);\n        if (!((this.element.selectionStart === 0) && (this.promptMask === this.element.value) && val === '')\n            || (val === '' && this.value !== val)) {\n            this.prevValue = val;\n            this.value = val;\n        }\n    }\n    else {\n        triggerMaskChangeEvent.call(this, event);\n    }\n    if (this.element.selectionStart === 0 && this.element.selectionEnd === 0) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var temp_1 = this.element;\n        setTimeout(function () {\n            temp_1.setSelectionRange(0, 0);\n        }, 0);\n    }\n}\nfunction mobileSwipeCheck(key) {\n    if (key.length > 1 && ((this.promptMask.length + key.length) < this.element.value.length)) {\n        var elementValue = this.redoCollec[0].value.substring(0, this.redoCollec[0].startIndex) + key +\n            this.redoCollec[0].value.substring(this.redoCollec[0].startIndex, this.redoCollec[0].value.length);\n        setElementValue.call(this, elementValue);\n        this.element.selectionStart = this.element.selectionEnd = this.redoCollec[0].startIndex + key.length;\n    }\n    this.element.selectionStart = this.element.selectionStart - key.length;\n    this.element.selectionEnd = this.element.selectionEnd - key.length;\n}\nfunction mobileValidation(key) {\n    if (!this.maskKeyPress) {\n        mobileSwipeCheck.call(this, key);\n    }\n}\nfunction validateValue(key, isCtrlKey, event) {\n    mobileValidation.call(this, key);\n    if (isNullOrUndefined(this) || isNullOrUndefined(key)) {\n        return;\n    }\n    var startIndex = this.element.selectionStart;\n    var initStartIndex = startIndex;\n    var curMask;\n    var allowText = false;\n    var value = this.element.value;\n    var eventOldVal;\n    var prevSupport = false;\n    var isEqualVal = false;\n    for (var k = 0; k < key.length; k++) {\n        var keyValue = key[k];\n        startIndex = this.element.selectionStart;\n        if (!this.maskKeyPress && initStartIndex === startIndex) {\n            startIndex = startIndex + k;\n        }\n        if ((!this.maskKeyPress || startIndex < this.promptMask.length)) {\n            for (var i = startIndex; i < this.promptMask.length; i++) {\n                var maskValue = this.escapeMaskValue;\n                curMask = maskValue[startIndex];\n                if (this.hiddenMask[startIndex] === '\\\\' && this.hiddenMask[startIndex + 1] === key) {\n                    isEqualVal = true;\n                }\n                if ((isNullOrUndefined(this.regExpCollec[curMask]) && (isNullOrUndefined(this.customCharacters)\n                    || (!isNullOrUndefined(this.customCharacters) && isNullOrUndefined(this.customCharacters[curMask])))\n                    && ((this.hiddenMask[startIndex] !== this.promptChar && this.customRegExpCollec[startIndex][0] !== '['\n                        && this.customRegExpCollec[startIndex][this.customRegExpCollec[startIndex].length - 1] !== ']')))\n                    || ((this.promptMask[startIndex] !== this.promptChar) && isNullOrUndefined(this.customCharacters))\n                    || (this.promptChar === curMask && this.escapeMaskValue === this.mask)) {\n                    this.element.selectionStart = this.element.selectionEnd = startIndex + 1;\n                    startIndex = this.element.selectionStart;\n                    curMask = this.hiddenMask[startIndex];\n                }\n            }\n            if (!isNullOrUndefined(this.customCharacters) && !isNullOrUndefined(this.customCharacters[curMask])) {\n                var customValStr = this.customCharacters[curMask];\n                var customValArr = customValStr.split(',');\n                for (var i = 0; i < customValArr.length; i++) {\n                    if (keyValue.match(new RegExp('[' + customValArr[i] + ']'))) {\n                        allowText = true;\n                        break;\n                    }\n                }\n            }\n            else if (!isNullOrUndefined(this.regExpCollec[curMask]) && keyValue.match(new RegExp(this.regExpCollec[curMask]))\n                && this.promptMask[startIndex] === this.promptChar) {\n                allowText = true;\n            }\n            else if (this.promptMask[startIndex] === this.promptChar && this.customRegExpCollec[startIndex][0] === '['\n                && this.customRegExpCollec[startIndex][this.customRegExpCollec[startIndex].length - 1] === ']'\n                && keyValue.match(new RegExp(this.customRegExpCollec[startIndex]))) {\n                allowText = true;\n            }\n            if ((!this.maskKeyPress || startIndex < this.hiddenMask.length) && allowText) {\n                if (k === 0) {\n                    if (this.maskKeyPress) {\n                        this.undoCollec.push({ value: value, startIndex: startIndex, endIndex: startIndex });\n                    }\n                    else {\n                        var sIndex = this.element.selectionStart;\n                        var eIndex = this.element.selectionEnd;\n                        if (this.redoCollec.length > 0) {\n                            eventOldVal = this.redoCollec[0].value;\n                            setElementValue.call(this, eventOldVal);\n                            this.undoCollec.push(this.redoCollec[0]);\n                        }\n                        else {\n                            this.undoCollec.push({ value: this.promptMask, startIndex: startIndex, endIndex: startIndex });\n                            eventOldVal = this.promptMask;\n                            setElementValue.call(this, eventOldVal);\n                        }\n                        this.element.selectionStart = sIndex;\n                        this.element.selectionEnd = eIndex;\n                    }\n                }\n                startIndex = this.element.selectionStart;\n                applySupportedValues.call(this, event, startIndex, keyValue, eventOldVal, isEqualVal);\n                prevSupport = true;\n                if (k === key.length - 1) {\n                    this.redoCollec.unshift({\n                        value: this.element.value, startIndex: this.element.selectionStart, endIndex: this.element.selectionEnd\n                    });\n                }\n                allowText = false;\n            }\n            else {\n                startIndex = this.element.selectionStart;\n                preventUnsupportedValues.call(this, event, startIndex, initStartIndex, key, isCtrlKey, prevSupport);\n            }\n            if (k === key.length - 1 && !allowText) {\n                if (!Browser.isAndroid || (Browser.isAndroid && startIndex < this.promptMask.length)) {\n                    this.redoCollec.unshift({\n                        value: this.element.value, startIndex: this.element.selectionStart, endIndex: this.element.selectionEnd\n                    });\n                }\n            }\n        }\n        else {\n            if (key.length === 1 && !isCtrlKey && !isNullOrUndefined(event)) {\n                addMaskErrorClass.call(this);\n            }\n        }\n    }\n}\nfunction applySupportedValues(event, startIndex, keyValue, eventOldVal, isEqualVal) {\n    if (this.hiddenMask.length > this.promptMask.length) {\n        keyValue = changeToLowerUpperCase.call(this, keyValue, this.element.value);\n    }\n    if (!isEqualVal) {\n        var value = this.element.value;\n        var elementValue = value.substring(0, startIndex) + keyValue + value.substring(startIndex + 1, value.length);\n        setElementValue.call(this, elementValue);\n        this.element.selectionStart = this.element.selectionEnd = startIndex + 1;\n    }\n}\nfunction preventUnsupportedValues(event, sIdx, idx, key, ctrl, chkSupport) {\n    if (!this.maskKeyPress) {\n        var value = this.element.value;\n        if (sIdx >= this.promptMask.length) {\n            setElementValue.call(this, value.substring(0, sIdx));\n        }\n        else {\n            if (idx === sIdx) {\n                setElementValue.call(this, value.substring(0, sIdx) + value.substring(sIdx + 1, value.length));\n            }\n            else {\n                if (this.promptMask.length === this.element.value.length) {\n                    setElementValue.call(this, value.substring(0, sIdx) + value.substring(sIdx, value.length));\n                }\n                else {\n                    setElementValue.call(this, value.substring(0, idx) + value.substring(idx + 1, value.length));\n                }\n            }\n            this.element.selectionStart = this.element.selectionEnd = (chkSupport ||\n                this.element.value[idx] !== this.promptChar) ? sIdx : idx;\n        }\n        addMaskErrorClass.call(this);\n    }\n    if (key.length === 1 && !ctrl && !isNullOrUndefined(event)) {\n        addMaskErrorClass.call(this);\n    }\n}\nfunction addMaskErrorClass() {\n    var _this = this;\n    var parentElement = this.element.parentNode;\n    var timer = 200;\n    if (parentElement.classList.contains(INPUTGROUP) || parentElement.classList.contains(FLOATINPUT)) {\n        addClass([parentElement], ERROR);\n    }\n    else {\n        addClass([this.element], ERROR);\n    }\n    if (this.isIosInvalid === true) {\n        timer = 400;\n    }\n    attributes(this.element, { 'aria-invalid': 'true' });\n    setTimeout(function () {\n        if (!_this.maskKeyPress) {\n            removeMaskError.call(_this);\n        }\n    }, timer);\n}\nfunction removeMaskError() {\n    var parentElement = this.element.parentNode;\n    if (!isNullOrUndefined(parentElement)) {\n        removeClass([parentElement], ERROR);\n    }\n    removeClass([this.element], ERROR);\n    attributes(this.element, { 'aria-invalid': 'false' });\n}\n/**\n * Validates user input using masking elements '<' , '>' and '|'.\n *\n * @hidden\n */\nfunction changeToLowerUpperCase(key, value) {\n    var promptMask;\n    var i;\n    var curVal = value;\n    var caseCount = 0;\n    for (i = 0; i < this.hiddenMask.length; i++) {\n        if (this.hiddenMask[i] === '\\\\') {\n            promptMask = curVal.substring(0, i) + '\\\\' + curVal.substring(i, curVal.length);\n        }\n        if (this.hiddenMask[i] === '>' || this.hiddenMask[i] === '<' || this.hiddenMask[i] === '|') {\n            if (this.hiddenMask[i] !== curVal[i]) {\n                promptMask = curVal.substring(0, i) + this.hiddenMask[i] + curVal.substring(i, curVal.length);\n            }\n            ++caseCount;\n        }\n        if (promptMask) {\n            if (((promptMask[i] === this.promptChar) && (i > this.element.selectionStart)) ||\n                (this.element.value.indexOf(this.promptChar) < 0 && (this.element.selectionStart + caseCount) === i)) {\n                caseCount = 0;\n                break;\n            }\n            curVal = promptMask;\n        }\n    }\n    while (i >= 0 && promptMask) {\n        if (i === 0 || promptMask[i - 1] !== '\\\\') {\n            if (promptMask[i] === '>') {\n                key = key.toUpperCase();\n                break;\n            }\n            else if (promptMask[i] === '<') {\n                key = key.toLowerCase();\n                break;\n            }\n            else if (promptMask[i] === '|') {\n                break;\n            }\n        }\n        --i;\n    }\n    return key;\n}\n/**\n * To set updated values in the MaskedTextBox.\n *\n * @hidden\n */\nexport function setMaskValue(val) {\n    if (this.mask && val !== undefined && (this.prevValue === undefined || this.prevValue !== val)) {\n        this.maskKeyPress = true;\n        setElementValue.call(this, this.promptMask);\n        if (val !== '' && !(val === null && this.floatLabelType === 'Never' && this.placeholder)) {\n            this.element.selectionStart = 0;\n            this.element.selectionEnd = 0;\n        }\n        if (val !== null) {\n            for (var i = 0; i < val.length; i++) {\n                validateValue.call(this, val[i], false, null);\n            }\n        }\n        var newVal = strippedValue.call(this, this.element);\n        this.prevValue = newVal;\n        this.value = newVal;\n        triggerMaskChangeEvent.call(this, null, null);\n        this.maskKeyPress = false;\n        var labelElement = this.element.parentNode.querySelector('.e-float-text');\n        if (this.element.value === this.promptMask && this.floatLabelType === 'Auto' && this.placeholder &&\n            !isNullOrUndefined(labelElement) && labelElement.classList.contains(TOPLABEL) && !this.isFocus) {\n            removeClass([labelElement], TOPLABEL);\n            addClass([labelElement], BOTTOMLABEL);\n            setElementValue.call(this, '');\n        }\n    }\n    if (this.mask === null || this.mask === '' && this.value !== undefined) {\n        setElementValue.call(this, this.value);\n    }\n}\n/**\n * To set updated values in the input element.\n *\n * @hidden\n */\nexport function setElementValue(val, element) {\n    if (!this.isFocus && this.floatLabelType === 'Auto' && this.placeholder && isNullOrUndefined(this.value)) {\n        val = '';\n    }\n    var value = strippedValue.call(this, (element ? element : this.element), val);\n    if (value === null || value === '') {\n        Input.setValue(val, (element ? element : this.element), this.floatLabelType, false);\n        if (this.showClearButton) {\n            this.inputObj.clearButton.classList.add('e-clear-icon-hide');\n        }\n    }\n    else {\n        Input.setValue(val, (element ? element : this.element), this.floatLabelType, this.showClearButton);\n    }\n}\n/**\n * Provide mask support to input textbox through utility method.\n *\n * @hidden\n */\nexport function maskInput(args) {\n    var inputEle = getMaskInput(args);\n    applyMask.call(inputEle);\n    var val = strippedValue.call(this, this.element);\n    this.prevValue = val;\n    this.value = val;\n    if (args.mask) {\n        unwireEvents.call(inputEle);\n        wireEvents.call(inputEle);\n    }\n}\nfunction getMaskInput(args) {\n    addClass([args.element], UTILMASK);\n    var inputEle = {\n        element: args.element,\n        mask: args.mask,\n        promptMask: '',\n        hiddenMask: '',\n        escapeMaskValue: '',\n        promptChar: args.promptChar ? (args.promptChar.length > 1) ? args.promptChar = args.promptChar[0]\n            : args.promptChar : '_',\n        value: args.value ? args.value : null,\n        regExpCollec: regularExpressions,\n        customRegExpCollec: [],\n        customCharacters: args.customCharacters,\n        undoCollec: [],\n        redoCollec: [],\n        maskKeyPress: false,\n        prevValue: ''\n    };\n    createMask.call(inputEle);\n    return inputEle;\n}\n/**\n * Gets raw value of the textbox which has been masked through utility method.\n *\n * @hidden\n */\nexport function getVal(args) {\n    return strippedValue.call(getUtilMaskEle(args), args.element);\n}\n/**\n * Gets masked value of the textbox which has been masked through utility method.\n *\n * @hidden\n */\nexport function getMaskedVal(args) {\n    return unstrippedValue.call(getUtilMaskEle(args), args.element);\n}\nfunction getUtilMaskEle(args) {\n    var inputEle;\n    if (!isNullOrUndefined(args) && args.element.classList.contains(UTILMASK)) {\n        inputEle = getMaskInput(args);\n    }\n    return inputEle;\n}\n/**\n * Arguments to perform undo and redo functionalities.\n *\n * @hidden\n */\nvar MaskUndo = /** @class */ (function () {\n    function MaskUndo() {\n    }\n    return MaskUndo;\n}());\nexport { MaskUndo };\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nvar maskUndo = new MaskUndo();\n/* eslint-enable valid-jsdoc, jsdoc/require-jsdoc, jsdoc/require-returns, jsdoc/require-param */\n"]},"metadata":{},"sourceType":"module"}